(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))A(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&A(l)}).observe(document,{childList:!0,subtree:!0});function e(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function A(i){if(i.ep)return;i.ep=!0;const n=e(i);fetch(i.href,n)}})();const y="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAABHNCSVQICAgIfAhkiAAAA+5JREFUeJztnD2LU0EUhh/FHxBLmUazzYKtVoLNEhvtbUStFmy0E2KjNitYabUgNoqN9jYu24h2CjaCjavNIFZ7/4EWd4Jr9s7c3GRuzoR9nyqbyXzseTMf52bOASGEEEIIIYQQQgghhBBCCBsGwE3gBfAD2Pfe//He/wl/fwDGwNBshJk4Zj2AKQbALeCu934wSwXn3EfgOrDX58D6oiQBxnQw/DTOuafAA6DKOai+KUWAsfd+a9FGnHM/gQ1WaDaUIMAT7/2dXI2tmgjHjfsf5zQ+gPf+NPAyZ5t9YjkDht77720fcs5VwFfgO7AGuGDktnr3gEeLDrJvLAX44L2/ECsMS8kzYJvDG+sIuN9SvwLONNQtCisBkt/+cLS8Qrvxkpv3KswCqz3gfqwgfPNnMT7Ao3D8jHG347iWjpUAFxNlG3RbNh4E0Q4RfIpRh7aWjoUAg9gmGpaersfHinqviHGuY3tLxUKA84myt3O2+TpRtj5nm0vB2g+Y5tec9VbC6WrCQgBn0GexlDYDjhwSwBgJYMwqCDCkfmwx+TVsnKndiY8wCq9NOGHV8YwMgc+TH2mC/7DlnIPFHjH8167lI+zSZ8DtyC9kmwu0OQB2D7YbhP2MwUwoXYCTTW/O8jg6wfmm+kGQlJPYC6UL0AcpP2TpPspRFKAoJIAxEsAYCWCMBDBGAhgjAYyRAMZIAGMkgDESwBgJYIwEMEYCGCMBjJEAxkgAY0oXYD9RNo687tKGOaXfivgdK/DebznnLofX0UgZ4Ev2UWWkdAG2gWgETIvhJ7zPN5z8lL4EVS0RMEmccy8p/OZ06QJAIgImRajzMPtoMrMKAlTARhcRFrjp5jt+fmEsBEj9k6ci7+9Ri9AagB3CnFLGj/VhgsUmnArOToUT7QE3nHOvgGvA2mQTDt/498ArYKel/1QfrYHjubGKE95vuvMZgqsbryNm5EfT1cQl9X0Iqz3ga9ObSwgrHSXulTaOqW+sBEhFQ0aDuDOQavt5j/1GsRJgO1YQ1vU+ZsHNFsfNxGGzEqAKp5UYb8ibD25IOj2CmcNm6QdEnaSwF+ySR4QhdUDG6XnG0jeWAuykzvXBYIuK0Gp868cV1inLBtTHwmRo0BxpZ2bKvlhCejNrAaA+Gr5r+9CBBE6viRtsCFxlxuyLzrlLtDtuvVKCANAxa+JUGjOoU5md7ZLyspRkTqUIAJlSV85CKcaHsgSAJYhQkvGhPAFgtmNjZ8Iesonxmj9NiQJMyJVNtwIe05x90ZySBYB/p5rNrjOidMNPKF2Ag4yo87+tM3XqCcauqJ/nfAM+UdhSI4QQQgghhBBCCCGEEEKIo8tf+nE2xEEA1t4AAAAASUVORK5CYII=",m="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAAD1BMVEUAAAAAAAAAAAAAAAAAAABPDueNAAAABHRSTlMABojmDS1PJgAAAExJREFUeNpjGAUDAIRMXHACZ0WoIhUXPMAJqsgEnyJnUhQRto6ww0fBgKUnwjGhghmnmMAEPVLJVYRpHXEOHwXDqnwaLZ9GwWj5NAoAAAmRCQ1BoUAAAAAASUVORK5CYII=",f="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAAD1BMVEUAAAAAAAAAAAAAAAAAAABPDueNAAAABHRSTlMABojmDS1PJgAAAExJREFUeNpjGAUDAIRMXHACZ0WoIhUXPMAJqsgEnyJnUhQRto6ww0fBAKcqwhGighm1mMAEI27JVYRpHXEOHwXDo3waLZ9GwWj5NAoAH7qUOZfvbzQAAAAASUVORK5CYII=",u="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAAD1BMVEUAAAAAAAAAAAAAAAAAAABPDueNAAAABHRSTlMABojmDS1PJgAAAE1JREFUeNpjGAUDAIRMXHACZ0WoIhUXPMAJqsgEnyJnUhQRto6ww0fB4EhchKNFBTOCMYEJegyTqwjTOuIcPgqGevk0Wj6NgtHyaRQAAF6AkQl535H9AAAAAElFTkSuQmCC",B="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAABHNCSVQICAgIfAhkiAAAAiRJREFUeJzt3DFSFFEUheGjxQLGyOBmbeAKTHULkBGKm9CEiGTchGNIRpU7IHYFBJK9gIwlGNBTZUBht3Le6Yb/S5m6l55D97w3xbsSAAAAAAAAAAAAAACweBHouZF0JOmtpNeB/ve5kXQl6VLSdc/GPQMYJJ231t517DlbVX2XdKZOQfQK4KS19q1Tr0dRVV8lfXH3eeluIGm7tjdfklprnyVt3X3cd8B2vJDVqqpPknau+s4AhtbaL2P9bqrqjUyfCc5H0Kmxdm/nrsKuO+DJ/PXvVdUrSbePXdd1B3ww1U06chQ9cBTV3SZrsnHt3dtGUs3Yl8y6pqlcAUze4To/4CYYJE19VFp27T32AX+TevPTvSUtI4BnjQDCCCCMAMKWEMAm/QskuZahc+wk/Zj5+ocMmr4RfD+jr0U8gNbaoaTDqa+vqgcDWNtXIEt4BD1rBBBGAGEEEEYAYQQQRgBhBBBGAGEEEEYAYQQQRgBhBBBGAGEEEEYAYQQQRgBhBBBGAGEEEEYAYQQQtsYAhn/82SK5/jPuxlRXujux2HTPgbnW2kdjX8s1uQK4MtXVeKYrMW/Cck2uR9CFqW7SpaOoK4Dbqvppqt3deIpzdSflj421eztzFXYGcD0Ouli1cWyN7TSlexm6Gy9glXrMDOo1sGl1Y2vcY2r2eo8sOzWv1f/buHg41hMbWfan/RmuJQ7tu5BhIgoAAAAAAAAAAAAAAAj4DdjXYkK7VEucAAAAAElFTkSuQmCC",C="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAAA9CAYAAADlNZQ2AAAABHNCSVQICAgIfAhkiAAAAk5JREFUeJztmjuSwyAMhmVPbsGB0uQUadKm8SlygjS5nc7hrch4PbwEEkjs/mWckeFDCEl4gYQQcU891yjn3CJlew39iIi7RVAAANfnTWzsv1bBKqCYuL3sa2w2UF6cwILbcCZxOsHCbVCrODxs/QuguLTkYN1fD/hsb9EjuVWlC946hywszZCOKgHWOpdkgLcCCqDPWKc/DTk1FSxp72qChYj79XnbfYkx+8maDPCxldJ8KNTMp1Rkzyrxnlk9jAzr/noU/W9GYGRYn+0tMQ4TEjsNSz2QW7G4xBFHyQGesr0sJbUlmirPkpYYrNm8CqAC1owQSlXlWR5YLIjPCrQqg9coPw/ff8upZm6mYXEkvpQ5mj0NuSoESgPgwvHCnpIqo7zdlKeJw+JMYnvUm4i4x8YhAktiUj0L8xgw9phlHVTqnWywpDqlLTadc0vLiX5+dzMs31putRNTbffiCKkW2Pnd1XkWtxe1djhy9jhsVXnWjF3QEpFg9bzB0bQgfixFsKQhhbbgqE5rSllYo1ZYY68/CWsUKE1b0AsRd7OF9AiZK6S9qLkTR9053LNqEkaJPluJzeGwqJJsSOZsm4MlGfxztofDqpn8qILdbICnfvbEAXi4Z1nSPyyCVMLSeAXnnFtWDQPTWN6EtALoXElNamr+9ZDGBfzCyn3sMUIagB3HcAk+2MBEDOmt4TfAADpuokM6j2u4m5eqN7DQApqBBTDe003BApAHlgoJ5mAByAHLxU6TsLy4oJWmKKZhedVCo+ZxU8A6KwavNcn9AX1dWCe4ga5kAAAAAElFTkSuQmCC",g="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAAElBMVEUAAAAAAAAAAAAAAAAAAAAAAADgKxmiAAAABXRSTlMAUIAQz6lK3+MAAAC9SURBVHgBYhghYBQIKRIWMQkNdSYkwuAaGhpigCzADGCkjk4YAIEYDGMncIQulf1XKX0JMfBDXuX8FL3Lf+WtOZI3GpLuU/SRTBmSvl1kylAXHQVlSLcubsqQLx68KUN5fC/nFqAAKgqgohBKKiGkAmIqIKYCYiogphJiKiGmDDFliCmG9iI+br/4/gT8mPu37B/MrbI33d6+PAj7SO3DiWO+B8YePRxiUxyuwbpH9B72v+GuNghXQCMDjAIA0b6qzf9qWjYAAAAASUVORK5CYII=",S=(s,t)=>{let e;return(...A)=>{e&&clearTimeout(e),e=setTimeout(()=>{s(...A)},t)}},o=(s,t,...e)=>{const A=document.createElement(s);for(const i in t){if(typeof t=="string"){A.innerText=t;break}if(t instanceof HTMLElement){A.appendChild(t);break}if(Array.isArray(t[i])){const n=t[i];n[0]instanceof E&&(n[0].dom[n[1]]=A);continue}if(i==="style"){Object.assign(A.style,t[i]);continue}A[i]=t[i]}for(let i=0;i<e.length;i++){const n=e[i];n instanceof HTMLElement&&A.appendChild(n),typeof n=="string"&&(A.innerText=n)}return A},w=s=>document.querySelector(s);class E{constructor(){this.dom={}}setAs(t){return[this,t]}E(t){return this.dom[t]}}const h=new E,M=s=>{s.installTool("Bold",{image:B,tooling({selectedElement:t}){s.showModal("text-setting",t)}}),s.installTool("Image",{image:C,tooling({selectedElement:t}){const e=document.createElement("input");e.type="file",e.accept="image/*",e.click(),e.addEventListener("change",A=>{const i=A.target.files[0];if(i&&i.type.startsWith("image/")){const n=new FileReader;n.onload=l=>{const a=document.createElement("img");a.src=l.target.result,t?t==null||t.insertAdjacentElement("afterend",a):s._el.appendChild(a)},n.readAsDataURL(i)}})}}),s.installTool("Link",{image:y,tooling({selectedElement:t,selection:e,range:A}){s.showModal("link",{selectedElement:t,selection:e,range:A})}}),s.installAction("paste",t=>{var n,l;t.preventDefault();const e=t.clipboardData||window.clipboardData,A=e.getData("text/plain"),i=e.files[0];if(i&&i.type.startsWith("image/")){const a=new FileReader;a.onload=c=>{var d;const r=document.createElement("img");r.src=c.target.result,s.selectedElement?(d=s.selectedElement)==null||d.insertAdjacentElement("afterend",r):s._el.appendChild(r)},a.readAsDataURL(i)}if(A)if(s.selectedElement&&!s.selectedElement.innerText.trim())s.selectedElement.innerText=A.replace(/\n/g,"");else{const a=document.createElement("p");a.innerText=A.replace(/\n/g,""),(n=s.selectedElement)==null||n.insertAdjacentElement("afterend",a),s._el.appendChild(a)}(l=s._el)==null||l.focus()}),s.installAction("click",async t=>{const e=t.target;e.tagName==="IMG"&&s.showModal("image-tool",e)}),s.installModalTool("link",[({selection:t,range:e})=>{if(s.selection)return o("div",{className:"flex-y mw"},o("div",{className:"flex-x mw flex-cx"},o("span"),o("img",{style:{width:"24px"},src:g,onclick(){s.hideModal()}})),o("input",{placeholder:"input link here",id:"link-input"}),o("button",{className:"btn",onclick(){const A=w("#link-input").value;if(A){const i=document.createElement("a");i.href=A,i.textContent=t,e.deleteContents(),e.insertNode(i)}s.hideModal()}},"Done"))}]),s.installModalTool("image-tool",[t=>{const e=t.style.width.slice(0,-2),A=t.style.height.slice(0,-2);return o("div",{className:"flex-y mw"},o("div",{className:"flex-x mw flex-cx"},o("span"),o("img",{style:{width:"17px"},src:g,onclick(){s.hideModal()}})),o("span","select width"),o("div",o("input",{type:"range",min:"100",max:"500",step:"50",value:e,onchange(){const i=this.value;h.E("wv-span").innerText=i+" px",t.style.width=i+"px"}}),o("span",{ref:h.setAs("wv-span")},e?e+"px":"300px")),o("span","select height"),o("div",o("input",{type:"range",min:"100",max:"500",step:"50",value:A,onchange(){const i=this.value;h.E("hv-span").innerText=i+" px",t.style.height=i+"px"}}),o("span",{ref:h.setAs("hv-span")},A?A+"px":"300px")),o("div",{className:""},o("img",{style:{width:"2.7rem"},src:m,onclick(){t.style.margin="0px",t.style.alignSelf="flex-start",s.hideModal()}}),o("img",{style:{width:"2.7rem"},src:f,onclick(){t.style.alignSelf="inset",t.style.margin="0px auto",s.hideModal()}}),o("img",{style:{width:"2.7rem"},src:u,onclick(){t.style.margin="0px",t.style.alignSelf="flex-end",s.hideModal()}})))}]),s.installModalTool("text-setting",[t=>o("div",{className:"flex-y mw"},o("div",{className:"flex-x mw flex-cx"},o("span"),o("img",{style:{width:"17px"},src:g,onclick(){s.hideModal()}})),o("div",{className:"flex-y"},o("h3",{onclick(){t.style.fontWeight!=="bold"?t.style.fontWeight="bold":t.style.fontWeight="unset"}},"Bold"),o("h3",{onclick(){t.style.fontSize!=="30px"?t.style.fontSize="30px":t.style.fontSize="unset"}},"Main Header"),o("h3",{onclick(){t.style.fontSize!=="22px"?t.style.fontSize="22px":t.style.fontSize="unset"}},"Small Header"),o("h3",{onclick(){t.style.fontSize!=="16px"?t.style.fontSize="16px":t.style.fontSize="unset"}},"Normal"),o("h3",{onclick(){t.style.fontStyle!=="italic"?t.style.fontStyle="italic":t.style.fontStyle="unset"}},"Italic"),o("h3",{onclick(){t.style.textDecoration!=="underline"?t.style.textDecoration="underline":t.style.textDecoration="unset"}},"Underline"),o("h3",{onclick(){t.style.textDecoration!=="line-through"?t.style.textDecoration="line-through":t.style.textDecoration="unset"}},"Strike")),o("div",{className:"flex-fl"},o("img",{style:{width:"1.7rem"},src:m,onclick(){t.style.textAlign="start",s.hideModal()}}),o("img",{style:{width:"1.7rem"},src:f,onclick(){t.style.textAlign="center",s.hideModal()}}),o("img",{style:{width:"1.7rem"},src:u,onclick(){t.style.textAlign="end",s.hideModal()}})))])},I="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAABHNCSVQICAgIfAhkiAAAAzBJREFUeJztnLGu0zAUQI8RW5EQS8TABlIHxrCj/gBj3sJa2MsnMNP98XYkuvULkBiRCivvD1D3zmZI0pemTuI4duI4OVPVtPXt6b2O7TiFmZmZgNkUHq8Hi8JXZAkuhXmBGKrhTMgFQojB4qlikIBUcnJ8k/So5/Y2dXKmzqbc56gYOsihWOvImaogbTlTFJS0kTM1Qa3lTEmQkZypCErgepQ8C0pZgbmc0AV1lhOyICtyfBRkY94TAwdbXy60uZhVOT7yuMN7XcrZA/+Ae+AP8As4OWinEdN0XgL3fWVOqeyWpOJ6waTEepUDV53/3+zpDbBw3XbbDOpdTh2FzIqAo4s22mSQV3LgIbNI5ThZ9NfNoAg4+iRHRZZRMXCw9Zk6GTQKOXBe6z5gMZuaTvOjkZOTxyqEeEPakXcaHtSV2OjklMlKrlMHXiVo9HJyukpSCVoApxDk5GSSFhiUW1lQcHJyTCUVz2LByoFz5/2t7fuKgrahysmRUr6j5RDgosRCFwTnUtOe8E5OELRblCuWWOIgFi/JEkFrL1LZ5EZK+cV+SP6hOz5SpdrUJNWimqxuhRCfHMTjK1HdwarZ/FYI8cFBMF6R9UWf617TlGJrKeVXeyH5R1Nf1LQedBd6JmVZ9L7quO54IOhMquusddek74QQN5bi8Y4si2LVsTaL9ruQJQHKrsTkwmEipfzeMRjvqCozkwuHQWZSVZmZbl7YCSFufNuJYYG35Se67O7YAUlgkq4E2fhyK+CH5f1B+TX3BfAMeAK8BF6QruV8dLE04/LHHmKHWUS2ZGGj3UL7ytO9DYbcoxgDe0uCnN6zNvQu19hC+7ddJTTRSZKlGIxLz1L7jRhLshiDUTZZbH8UAUaGMZwX0VzecXgA4oHHSUcgMojhdf7A9S2ZY5X0ylUwVWiXm8MYtMvNYQy1aEnyJIbzqb7Pu559KLcDehdIn7sOpI4lVP+KPcVw25BB+57iqEQpqcf2F6r2B4ijlitJ9PsHJ5WZXHyRD2s5CfAU+I3F/c26qDImsDWuTihLrfiCvv+7wzdOZPPGmQZK2XMeCsy19sCKdIrxkx7vR5sJnf/W7+jC2vw/EwAAAABJRU5ErkJggg==",U="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAABHNCSVQICAgIfAhkiAAAA9tJREFUeJztnDusDFEYgD+ikNxEIWzEX1CIldCwovJsEBKFgkg8qkWluCqvxqtzC5VQSYRQSmjdhBI9oRF/I0IkhI5iz67ZvTOz8zjnzJnZ/ZJNZmdnzvnvt/+ZmfPYC1OmTJlAusA785qtOJbgmFXVv9EXcL2qYBZXVXEKF0Z3qOolKpK0qIpK0zAZE4uI3AAuewwnyAxKxGSS12tSrQQBqOotPEqqnSAYSOr6qKuWggBU9S4eJNVWEAwkHXFZR60FAajqYxxKqr0gcCupEYIM93EgqTGCVHUpPUl7bJbbGEEwkPQci5IaJQjsS2qcIBiS1ClbViMFwUDSK0pKqrI3PwNsAzYDbWAVsEFV19usRES+AvuBN0XO9y2oDZwA9gGbzLfsHCNpO70Rylz4EDQDnAGOqepWD/XFUlSSS0Et4BxwRlVXOKwnM0UkuRLUBW6GIiZKXkm2BXWAO1U2pSyIyHtgB/Bl3LE2b/Nd4FXocgDMnfIlvctAKjYyaAaYU9XTFsrySpZMKiuoBTyrQ9YkMU5SGUEt4KXtB7sqEJHXwEFiJBUVNAPM1zlzRjGSdgO/ovuLCGqcnD5xkorcxR42UQ6A+bvm6SUBkF9QV1UP2QwqNIykuf77PILawG3rEYXJ4f5GHkEPfPW+A+BbfyOroNmmXncSuNLfyCKoRcyanaYiIueBJ/33WQSdC7FX7gIjZy66b5ygFnDeWUQBEScHYMmY865NwoVZRE4D9+I+S8ugFnDSSUQBkSYH0gUdb3r2jJMD6YKO2Q0nLLLIgeTOakdVX9sNKRxE5CiRW3kaSRlUu9HBrOSRA8mCDifsrzV55UC8oE4THwyLyIH456Bd5cMJBxH5A5yigByIz6DGCCorB+IzaG/hiFIwswfz9GY0PwMfgZ/Ad/4Pcf5K+61Gzvr+AAeAF2XKGRXUsflwaMZ4HwEPyDCLabFeK3JgoSArzUtEngJXKbgmp2Td1uTAQkHtMoWZjDlLBWJM/VblwEJBW4oUYgK7RMxwgS9cyIGFgtbmLaDsEjcbuJIDw4JaeR8Q06ZsfWHkbMfRFxR9DtqY58RA5PQXQznL3qigdVlPCkiO86YdFbQmywkmsImQA8OCVo472LT3/UyIHBgWtCrD8aeo9m7l/Y45blZjgIjcpUSnryxlFoOXIZpBq5MOMh1NLz/FNiLi9nmXA8OClsUdYK47hxhZeeWQiyP1v6ciOTDcxJYnHHMLv8HdE5G39Lo9P6iwWcPwrMbv0aEO8+1twV/2BEe0iX2K+fwsEyxnlCP0sqjy/9kTEqMTh21gJ/ABBz3jKVMmj39oLj/tWfnkbQAAAABJRU5ErkJggg==",x=()=>{const s=document.createElement("style");s.innerHTML=`
  /* rabbit css - minified */
  {css}
`,document.head.appendChild(s)};class N{constructor({STACK_SIZE:t,STACKING_TIME:e}={}){this._doStack=[],this._do_index=0,this._STACK_SIZE=1e3,this._STACKING_TIME=100,this._toolsList={},this._modalList={},this._syntheticActionList={},this.selection=null,this.selectedElement=null,this.range=null,this._actionList={input:[],paste:[],copy:[],click:[],contextmenu:[],"document-selectionchange":[]},t&&(this._STACK_SIZE=t),e&&(this._STACKING_TIME=e)}installOn(t="pub"){const e=document.getElementById(t);window.outerWidth<601?e.className="rabbit-editor-container mobile":e.className="rabbit-editor-container",x(),e.contentEditable="true",e.innerHTML="<p>Start Typing .... </p>",this._el=e,this._createDefaultTools(),this._createDefaultActions(),this._installTools(),this._ActivateActions(),this._el.focus()}installTool(t,e){//! checking type
this._toolsList[t]=e}installAction(t,e){//! checking type
this._actionList[t]?this._actionList[t].push(e):this._actionList[t]=[e]}installModalTool(t,e){this._modalList[t]=e}showModal(t,e=null){if(Array.isArray(this._modalList[t])){this._Mel.innerHTML="";const A=this._modalList[t][0](e);A&&(this._Mel.appendChild(A),this._Mel.classList.remove("in-active"),this._Mel.classList.add("active"))}}navigateModal(t,e,A){if(Array.isArray(this._modalList)){this._Mel.innerHTML="";const i=this._modalList[e][t](A);i&&(this._Mel.appendChild(i),this._Mel.classList.remove("in-active"),this._Mel.classList.add("active"))}}hideModal(){this._Mel.classList.remove("active"),this._Mel.classList.add("in-active")}fireSyntheticAction(t){var e;(e=this._syntheticActionList[t])==null||e.call()}_createDefaultActions(){const t=async()=>{const n=window.getSelection();if(n.rangeCount>0){const l=n.getRangeAt(0),a=l.startContainer,c=a.parentNode;if(c.nodeName!=="P"){const r=document.createElement("p");r.textContent=a.textContent||"",c.id!=="pub"&&a.id!=="pub"&&(c.insertAdjacentElement("afterend",r),c.remove(),l.deleteContents(),l.insertNode(r),n.removeRange(l))}else a.nodeName==="IMG"&&(c.removeChild(a),c.insertAdjacentElement("afterend",a),console.log(a,c))}this._el.focus()},e=async()=>{var l,a;const n=window.getSelection();if(n.rangeCount>0){const c=n.getRangeAt(0),r=c.startContainer,d=r.textContent||"";d&&((l=r.parentNode)==null?void 0:l.nodeName)==="P"&&(this.selection=c.toString(),this.selectedElement=r.parentNode,this.range=c),d&&((a=r.parentNode)==null?void 0:a.nodeName)==="SPAN"&&r.parentNode}},A=async n=>{const l=n.target;l.tagName==="P"&&(this.selectedElement=l,l.innerText.trim()||l.removeAttribute("style"))};document.addEventListener("keydown",async n=>{var l;if(/(ArrowUp|ArrowDown|Enter)/.test(n.key)){const a=window.getSelection();if(a.rangeCount>0){const c=a.getRangeAt(0),r=c.startContainer;((l=r.parentNode)==null?void 0:l.nodeName)==="P"&&(this.selectedElement=r.parentNode,this.range=c,this.selectedElement.innerText.trim()||this.selectedElement.removeAttribute("style"))}}});const i=S(async()=>{this._saveState()},this._STACKING_TIME);this._actionList.input.push(i,t),this._actionList["document-selectionchange"].push(e),this._actionList.click.push(A)}_createDefaultTools(){const t=this;this._toolsList.redo={image:I,tooling(){t._redo()}},this._toolsList.undo={image:U,tooling(){t._undo()}}}_installTools(){var A;const t=document.createElement("div"),e=document.createElement("div");window.outerWidth<601?(t.className="rabbit-tool-container mobile",e.className="rabbit-modal mobile"):(t.className="rabbit-tool-container",e.className="rabbit-modal");for(const i in this._toolsList){let n=null;this._toolsList[i].image&&(n=o("img",{src:this._toolsList[i].image,className:"rabbit-tool"})),this._toolsList[i].text&&(n=o("button",{className:"rabbit-tool"},this._toolsList[i].text)),this._toolsList[i].html&&(this._toolsList[i].html.className="rabbit-tool",n=this._toolsList[i].html),n.addEventListener("click",()=>this._apply(i)),n.title=i,t.appendChild(n)}t.appendChild(e),this._Mel=e,(A=this._el.parentElement)==null||A.appendChild(t)}async _apply(t){const e=this._toolsList[t].tooling;e({selectedElement:this.selectedElement,selection:this.selection,range:this.range}),this._el.focus()}_saveState(){this._doStack.length>this._STACK_SIZE&&(this._doStack.length=this._STACK_SIZE);const t=this._el.innerHTML;t!==this._doStack.at(-1)&&(this._doStack.push(t),this._do_index=this._doStack.length-1)}_undo(){if(this._doStack.length>0){this._do_index-=1;const t=this._doStack.at(this._do_index);t&&(this._el.innerHTML=t)}}_redo(){if(this._doStack.length>0){this._do_index+=1;const t=this._doStack.at(this._do_index);t&&(this._el.innerHTML=t)}}_ActivateActions(){for(const[t,e]of Object.entries(this._actionList))for(let A=0;A<e.length;A++)t.includes("document-")?document.addEventListener(t.split("document-")[1],e[A]):t.includes("synthetic-")?this._syntheticActionList[t]=e[0]:this._el.addEventListener(t,e[A])}}const p=new N;M(p);p.installOn("pub");
